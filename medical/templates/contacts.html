{% extends 'base.html' %}

{% load my_tags %}
{% block title %}Удаление{% endblock %}

{% block content %}

<div class="container my-5">

    <!-- Заголовок страницы -->
    <header class="text-center mb-5">
        <h1 class="display-4 fw-bold">Контакты</h1>
        <p class="lead text-muted">Свяжитесь с нами или посетите наш офис</p>
    </header>

    <!-- Адрес и карта -->
    <section class="section" id="address-map">
        <h2 class="text-center mb-4">Наш адрес и карта проезда</h2>
        <div class="row g-4 align-items-center">
            <div class="col-md-6">
                <h5>Адрес</h5>
                <p>{{ information.address }}</p>
                <h5>Контакты</h5>
                <p><strong>Телефон:</strong> {{ information.phone }}</p>
                <p><strong>Email:</strong> {{ information.email }}</p>
            </div>
            <div class="col-md-6">
                <div class="map-container">
                    <!-- Вставьте сюда карту Google Maps или другую карту -->

                    <div id="map" style="width: 100%; height: 500px;"></div>
                    <script type="text/javascript">
                        ymaps.ready(init);
                        function init() {
                            var map = new ymaps.Map("map", {
                                center: [55.7558, 37.6173], // Центр карты (например, Москва)
                                zoom: 10
                            });

                            // Получите ваши адреса из контекста
                            var addresses = [
                                {% for address in address_hospital %}
                                {
                                    name: "{{ address.name }}",
                                    address_line: "{{ address.address_line }}",
                                    latitude: {{ address.latitude }},
                                    longitude: {{ address.longitude }}
                                }{% if not forloop.last %},{% endif %}
                                {% endfor %}
                            ];

                            // Добавляем метки
                            addresses.forEach(function(addr) {
                                var placemark = new ymaps.Placemark([addr.latitude, addr.longitude], {
                                    balloonContent: "<strong>" + addr.name + "</strong><br>" + addr.address_line
                                });
                                map.geoObjects.add(placemark);
                            });
                        }
                    </script>

                </div>
            </div>
        </div>
    </section>

    {% if user.is_authenticated %}
    <!-- Форма обратной связи -->
    <section class="section" id="feedback">
        <h2 class="text-center mb-4">Обратная связь</h2>
        <form method="post" action="FeedbackCreateView">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn btn-primary">Отправить</button>
        </form>
    </section>
    {% endif %}

</div>

{% endblock %}
