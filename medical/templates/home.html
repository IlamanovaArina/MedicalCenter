{% extends 'base.html' %}

{% block title %}Главная страница{% endblock %}
{% load my_tags %}
{% block content %}

<div class="container my-5">

    <!-- Заголовок страницы -->
    <header class="text-center mb-5">
        <h1 class="display-4 fw-bold">Добро пожаловать!</h1>
        <p class="lead text-muted">Узнайте больше о нашей компании и услугах</p>
    </header>

    <!-- Описание компании -->
    <section class="section" id="about-company">
        <h2 class="text-center mb-4">О компании</h2>
        <div class="row align-items-center">
            <div class="col-md-6 mb-4 mb-md-0">
                {% load static %}
                {% if information.text_from_the_main_page and information.text_from_the_main_page.url %}
                <img src="{{information.text_from_the_main_page.url}}"
                     class="img-fluid rounded shadow" alt="О компании"/>
                {% else %}
                <img src="{% static 'images/doctor1.jpg' %}" alt="О компании" class="img-fluid rounded shadow"/>
                {% endif %}
            </div>
            <div class="col-md-6">
                <p>
                    {{ information.text_from_the_main_page }}
                </p>
            </div>
        </div>
    </section>

    <!-- Перечень услуг -->
    <section class="section" id="services">
        <h2 class="text-center mb-4">Наши услуги</h2>
        <div class="row g-4">
            {% for direction in medical_direction %}
            <div class="col-md-4">
                <!-- Ссылка на раздел с услугами по направлению -->
                <a class="service-link" href="#direction_{{ direction.id }}">
                    <div class="card service-card h-100 border-0 shadow rounded p-4 bg-white">
                        <h4 class="mb-3">{{ direction.name }}</h4>
                    </div>
                </a>
                <!-- Список услуг для этого направления -->
                <ul class="list-group mt-2">
                    {% for service in services %}
                    {% if service.medical_direction.id == direction.id %}
                    <li class="list-group-item">
                        <strong>{{ service.name }}:</strong> {{ service.description }}
                    </li>
                    {% endif %}
                    {% endfor %}
                </ul>
            </div>
            {% endfor %}
        </div>
    </section>

    <!-- Контактная информация -->
    <section class="section bg-light" id="contacts">
        <h2 class="text-center mb-4">Контактная информация</h2>
        <div class="row justify-content-center text-center">
            <div class="col-md-4 mb-3">
                <h5>Адреса:</h5>
                {% for address in address_hospital %}
                <p>{{ address.address_line }}</p>
                {% endfor %}
            </div>
            <div class="col-md-4 mb-3">
                <h5>Телефон</h5>
                <p>{{ information.phone }}</p>
            </div>
            <div class="col-md-4 mb-3">
                <h5>Email</h5>
                <p>{{ information.email }}</p>
            </div>
        </div>
    </section>

    {% if user.is_authenticated %}
    <!-- Форма обратной связи -->
    <section class="section" id="feedback">
        <h2 class="text-center mb-4">Обратная связь</h2>

        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn btn-primary">Отправить</button>
        </form>

    </section>
    {% endif %}

</div>

{% endblock %}
